# è£œå……è³‡æºç¼ºå¤±å ±å‘Š

åŸºæ–¼ä»£ç¢¼å…¨é¢æƒæï¼Œæœ¬æ–‡æª”åˆ—å‡ºäº†**æœªåœ¨ä¹‹å‰å ±å‘Šä¸­æ¨™è¨˜ä½†å¯¦éš›è¢«ä»£ç¢¼å¼•ç”¨**çš„è³‡æºéœ€æ±‚ã€‚

> **æ³¨æ„**: æœ¬å ±å‘Šè£œå……äº† `MISSING_ASSETS_DETAILED.md`ï¼Œå…©ä»½æ–‡æª”æ‡‰ä¸€èµ·åƒè€ƒã€‚

---

## ğŸš¨ é—œéµå•é¡Œ

### 1. è·¯å¾‘ä¸ä¸€è‡´å•é¡Œ

**å•é¡Œä½ç½®**: `src/managers/CharacterDispatchManager.js:315`

```javascript
// ä»£ç¢¼ä½¿ç”¨çš„è·¯å¾‘
const animPath = `assets/characters/animations/${character.id}_${character.name}/${taskDef.animation}/`;

// å¯¦éš›ç”Ÿæˆçš„è·¯å¾‘
assets/animations/{characterId}/{action}/
```

**å½±éŸ¿**: æ‰€æœ‰ä»»å‹™å‹•ç•«ç„¡æ³•æ­£ç¢ºè¼‰å…¥

**è§£æ±ºæ–¹æ¡ˆ**:
- é¸é … A: ä¿®æ”¹ä»£ç¢¼ä»¥åŒ¹é…å¯¦éš›è·¯å¾‘
- é¸é … B: èª¿æ•´ç”Ÿæˆè…³æœ¬ä»¥åŒ¹é…ä»£ç¢¼è·¯å¾‘ï¼ˆä¸æ¨è–¦ï¼Œæœƒç ´å£ç¾æœ‰çµæ§‹ï¼‰

**å»ºè­°**: æ¡ç”¨é¸é … Aï¼Œä¿®æ”¹ `CharacterDispatchManager.js:315` ç‚ºï¼š
```javascript
const animPath = `assets/animations/${character.id}/${taskDef.animation}/`;
```

---

### 2. å“¡å·¥æ¨¡æ¿è³‡æºè·¯å¾‘å•é¡Œ

**å•é¡Œä½ç½®**: `src/data/employeeTemplates.js`

```javascript
// ä»£ç¢¼ä¸­çš„è·¯å¾‘ï¼ˆä¸æ­£ç¢ºï¼‰
portrait: 'assets/portraits/manager.png'
avatar: 'assets/avatars/manager.png'

// æ‡‰è©²æ˜¯
portrait: 'assets/characters/portraits/007_æ²ˆé’å±±_portrait_normal.svg'
avatar: 'assets/characters/avatars/007_æ²ˆé’å±±_avatar.svg'
```

**å½±éŸ¿**: å“¡å·¥è‚–åƒç„¡æ³•è¼‰å…¥

**è§£æ±ºæ–¹æ¡ˆ**:
- å“¡å·¥æ‡‰è©²ç›´æ¥å¼•ç”¨å°æ‡‰çš„è§’è‰²è³‡æº
- æ²ˆé’å±±(007)ã€æ—èªå«£(002)ç­‰å·²æœ‰è§’è‰²è³‡æºå¯ç›´æ¥ä½¿ç”¨

---

## ğŸ“‹ ç¼ºå¤±è³‡æºæ¸…å–®

### 1. ä»»å‹™å‹•ç•«ï¼ˆTask Animationsï¼‰âš ï¸ é«˜å„ªå…ˆç´š

**å®šç¾©ä½ç½®**: `src/managers/CharacterDispatchManager.js:30-129`

#### å¿…éœ€çš„ä»»å‹™å‹•ç•«é¡å‹

| ä»»å‹™ID | ä»»å‹™åç¨± | å‹•ç•«å¹€æ•¸ | åˆ†é¡ | å„ªå…ˆç´š |
|--------|---------|---------|------|--------|
| cooking | çƒ¹é£ª | 6å¹€ | kitchen | ğŸ”´ é«˜ |
| prep | å‚™èœ | 6å¹€ | kitchen | ğŸ”´ é«˜ |
| serving | ç«¯èœ | 6å¹€ | service | ğŸ”´ é«˜ |
| greeting | è¿è³“ | 3å¹€ | service | ğŸŸ¡ ä¸­ |
| cleaning | æ‰“æƒ | 6å¹€ | service | ğŸŸ¡ ä¸­ |
| tidying | æ•´ç†æˆ¿é–“ | 6å¹€ | service | ğŸŸ¡ ä¸­ |
| performing | æ¼”å¥ | 6å¹€ | entertainment | ğŸŸ¡ ä¸­ |
| healing | æ²»ç™‚ | 6å¹€ | medical | ğŸŸ¡ ä¸­ |
| security | ä¿å®‰ | 6å¹€ | security | ğŸŸ¡ ä¸­ |
| accounting | è¨˜è³¬ | 6å¹€ | management | ğŸŸ¡ ä¸­ |

#### ç¸½éœ€æ±‚è¨ˆç®—

```
æ ¸å¿ƒä»»å‹™ï¼ˆ3ç¨®ï¼‰: cooking, prep, serving
æ¯ç¨® 6 å¹€ Ã— 11 å€‹è§’è‰² = 198 å¹€

å¯é¸ä»»å‹™ï¼ˆ7ç¨®ï¼‰: greeting, cleaning, tidying, performing, healing, security, accounting
æ¯ç¨®å¹³å‡ 6 å¹€ Ã— 11 å€‹è§’è‰² = 462 å¹€ï¼ˆæœ€å¤šï¼‰

ç¸½è¨ˆ: 660 å€‹å‹•ç•«å¹€
```

#### ç”Ÿæˆè¦ç¯„

**è·¯å¾‘**: `assets/animations/{characterId}/{taskId}/`
**å‘½å**: `{taskId}_{frameNumber}.svg`
**å°ºå¯¸**: 64Ã—64px

**ç¯„ä¾‹**:
```
assets/animations/001/cooking/cooking_0.svg
assets/animations/001/cooking/cooking_1.svg
...
assets/animations/001/serving/serving_0.svg
...
```

---

### 2. éŸ³é »è³‡æºï¼ˆAudioï¼‰ğŸµ ä¸­å„ªå…ˆç´š

**å¼•ç”¨ä½ç½®**: `src/audio/AudioManager.js`
**ç›®éŒ„ç‹€æ…‹**: å­˜åœ¨ä½†ç‚ºç©ºï¼ˆ`assets/audio/`ï¼‰

#### 2.1 èƒŒæ™¯éŸ³æ¨‚ï¼ˆBGMï¼‰

| å ´æ™¯ | æ–‡ä»¶åå»ºè­° | ç”¨é€” |
|------|-----------|------|
| ä¸»èœå–® | `bgm_menu.mp3` | ä¸»é¸å–®èƒŒæ™¯éŸ³æ¨‚ |
| å®¢æ£§æ—¥é–“ | `bgm_inn_day.mp3` | å®¢æ£§ç™½å¤©ç‡Ÿæ¥­ |
| å®¢æ£§å¤œé–“ | `bgm_inn_night.mp3` | å®¢æ£§å¤œæ™šæ°›åœ |
| æˆ°é¬¥å ´æ™¯ | `bgm_battle.mp3` | æˆ°é¬¥éŸ³æ¨‚ |
| åŠ‡æƒ…å°è©± | `bgm_story.mp3` | è¦–è¦ºå°èªªå°è©± |
| åŸé®è¡—é“ | `bgm_town.mp3` | åŸé®æ¢ç´¢ |

**æ ¼å¼**: MP3 / OGG
**è·¯å¾‘**: `assets/audio/bgm/`

#### 2.2 éŸ³æ•ˆï¼ˆSFXï¼‰

| é¡åˆ¥ | éŸ³æ•ˆåç¨± | æ–‡ä»¶åå»ºè­° |
|------|---------|-----------|
| UI | æŒ‰éˆ•é»æ“Š | `sfx_button_click.mp3` |
| UI | é¸å–®é–‹å•Ÿ | `sfx_menu_open.mp3` |
| UI | é€šçŸ¥æç¤º | `sfx_notification.mp3` |
| UI | é‡‘éŒ¢ç²å¾— | `sfx_coin.mp3` |
| å»šæˆ¿ | çƒ¹é£ªéŸ³æ•ˆ | `sfx_cooking.mp3` |
| å»šæˆ¿ | åˆ‡èœéŸ³æ•ˆ | `sfx_chopping.mp3` |
| æˆ°é¬¥ | æ”»æ“ŠéŸ³æ•ˆ | `sfx_attack.mp3` |
| æˆ°é¬¥ | å—å‚·éŸ³æ•ˆ | `sfx_hit.mp3` |
| æˆ°é¬¥ | æ²»ç™‚éŸ³æ•ˆ | `sfx_heal.mp3` |
| ç’°å¢ƒ | è…³æ­¥è² | `sfx_footstep.mp3` |
| ç’°å¢ƒ | é–‹é–€è² | `sfx_door.mp3` |

**æ ¼å¼**: MP3 / OGG
**è·¯å¾‘**: `assets/audio/sfx/`

#### éŸ³é »è³‡æºç¸½è¨ˆ

- BGM: 6 é¦–ï¼ˆæœ€å°‘ï¼‰
- SFX: 11 å€‹ï¼ˆæ ¸å¿ƒï¼‰
- **ç¸½è¨ˆ**: 17 å€‹éŸ³é »æ–‡ä»¶

---

### 3. NPC/å“¡å·¥è‚–åƒ ğŸ‘¥ ä½å„ªå…ˆç´š

**å•é¡Œ**: `employeeTemplates.js` ä¸­å®šç¾©äº†ç¨ç«‹çš„å“¡å·¥è‚–åƒè·¯å¾‘ï¼Œä½†å¯¦éš›æ‡‰è©²å¾©ç”¨è§’è‰²è³‡æºã€‚

#### å»ºè­°è™•ç†æ–¹å¼

**ä¸éœ€è¦ç”Ÿæˆæ–°è³‡æº**ï¼Œä¿®æ”¹ä»£ç¢¼ä»¥å¼•ç”¨ç¾æœ‰è§’è‰²è³‡æºï¼š

```javascript
// employeeTemplates.js ä¿®æ”¹å»ºè­°

// æŒæ«ƒ - æ²ˆé’å±± (007)
{
  id: 0,
  name: 'æŒæ«ƒ',
  realName: 'æ²ˆé’å±±',
  characterId: '007',  // æ–°å¢ï¼šé—œè¯è§’è‰²ID
  // ç§»é™¤ portrait å’Œ avatarï¼Œæ”¹ç‚ºå‹•æ…‹ç²å–
}

// åœ¨è¼‰å…¥æ™‚å‹•æ…‹å¾ asset-manifest.json ç²å–å°æ‡‰è§’è‰²è³‡æº
```

---

## ğŸ“ è³‡æºè¦ç¯„è£œå……

### ä»»å‹™å‹•ç•«è³‡æºè¦ç¯„

æ·»åŠ åˆ° `docs/ASSET_SCHEMA.md` çš„**è§’è‰²å‹•ç•«å¹€**ç« ç¯€ï¼š

#### æ“´å±•å‹•ç•«é¡å‹ï¼ˆå¯é¸ï¼‰

é™¤äº†åŸºç¤ 8 ç¨®å‹•ä½œå¤–ï¼Œæ”¯æŒä»¥ä¸‹ä»»å‹™å‹•ç•«ï¼š

**å»šæˆ¿ä»»å‹™**:
```
cooking/    - çƒ¹é£ªï¼ˆ6å¹€ï¼‰
prep/       - å‚™èœï¼ˆ6å¹€ï¼‰
serving/    - ç«¯èœï¼ˆ6å¹€ï¼‰
```

**æœå‹™ä»»å‹™**:
```
greeting/   - è¿è³“ï¼ˆ3å¹€ï¼‰
cleaning/   - æ‰“æƒï¼ˆ6å¹€ï¼‰
tidying/    - æ•´ç†ï¼ˆ6å¹€ï¼‰
```

**ç‰¹æ®Šä»»å‹™**:
```
performing/  - æ¼”å¥ï¼ˆ6å¹€ï¼‰
healing/     - æ²»ç™‚ï¼ˆ6å¹€ï¼‰
security/    - ä¿å®‰ï¼ˆ6å¹€ï¼‰
accounting/  - è¨˜è³¬ï¼ˆ6å¹€ï¼‰
```

**ç”Ÿæˆå„ªå…ˆç´š**:
- ğŸ”´ å¿…éœ€: cooking, prep, servingï¼ˆæ ¸å¿ƒç¶“ç‡Ÿç©æ³•ï¼‰
- ğŸŸ¡ å»ºè­°: cleaning, tidying, performingï¼ˆå¢å¼·é«”é©—ï¼‰
- ğŸŸ¢ å¯é¸: greeting, healing, security, accountingï¼ˆå®Œæ•´æ€§ï¼‰

---

### éŸ³é »è³‡æºè¦ç¯„

æ·»åŠ åˆ° `docs/ASSET_SCHEMA.md` çš„æ–°ç« ç¯€ï¼š

#### èƒŒæ™¯éŸ³æ¨‚ï¼ˆBGMï¼‰

- **ç”¨é€”**: å ´æ™¯æ°›åœç‡Ÿé€ 
- **æ•¸é‡**: 6-10 é¦–
- **æ ¼å¼**: MP3 (128-192kbps) / OGG
- **å¾ªç’°**: æ”¯æŒç„¡ç¸«å¾ªç’°
- **å‘½åè¦å‰‡**: `bgm_{sceneName}.mp3`
- **è·¯å¾‘**: `assets/audio/bgm/`

#### éŸ³æ•ˆï¼ˆSFXï¼‰

- **ç”¨é€”**: äº¤äº’åé¥‹ã€ç’°å¢ƒéŸ³æ•ˆ
- **æ•¸é‡**: 10-30 å€‹
- **æ ¼å¼**: MP3 / OGG / WAV
- **é•·åº¦**: å»ºè­° < 3 ç§’
- **å‘½åè¦å‰‡**: `sfx_{actionName}.mp3`
- **è·¯å¾‘**: `assets/audio/sfx/`

---

## ğŸ”§ ä¿®å¾©å»ºè­°

### ç«‹å³ä¿®å¾©ï¼ˆä»£ç¢¼å±¤é¢ï¼‰

#### 1. ä¿®æ­£å‹•ç•«è·¯å¾‘

**æ–‡ä»¶**: `src/managers/CharacterDispatchManager.js`
**è¡Œè™Ÿ**: 315

```javascript
// ä¿®æ”¹å‰
const animPath = `assets/characters/animations/${character.id}_${character.name}/${taskDef.animation}/`;

// ä¿®æ”¹å¾Œ
const animPath = `assets/animations/${character.id}/${taskDef.animation}/`;
```

#### 2. ä¿®æ­£å“¡å·¥æ¨¡æ¿

**æ–‡ä»¶**: `src/data/employeeTemplates.js`

**æ–¹æ¡ˆ A**: ç›´æ¥å¼•ç”¨è§’è‰²è³‡æº
```javascript
{
  id: 0,
  name: 'æŒæ«ƒ',
  realName: 'æ²ˆé’å±±',
  characterId: '007',
  // ç§»é™¤ portrait å’Œ avatar
  // æ”¹ç‚ºé‹è¡Œæ™‚å¾ AssetLoader ç²å–
}
```

**æ–¹æ¡ˆ B**: ä¿®æ­£è·¯å¾‘å’Œæ ¼å¼
```javascript
portrait: 'assets/characters/portraits/007_æ²ˆé’å±±_portrait_normal.svg',
avatar: 'assets/characters/avatars/007_æ²ˆé’å±±_avatar.svg',
```

---

### è³‡æºç”Ÿæˆå„ªå…ˆç´š

#### Phase 2: ä»»å‹™å‹•ç•«æ ¸å¿ƒï¼ˆé«˜å„ªå…ˆç´šï¼‰

ç”Ÿæˆ3ç¨®æ ¸å¿ƒä»»å‹™å‹•ç•«ï¼š
```bash
# ç”Ÿæˆ cooking, prep, serving å‹•ç•«
npm run assets:task-animations-core
```

**éœ€è¦ç”Ÿæˆ**: 198 å¹€ï¼ˆ3 ç¨® Ã— 6 å¹€ Ã— 11 è§’è‰²ï¼‰

#### Phase 3: éŸ³é »è³‡æºï¼ˆä¸­å„ªå…ˆç´šï¼‰

æº–å‚™åŸºç¤éŸ³é »è³‡æºï¼š
```bash
# éœ€è¦æ‰‹å‹•æº–å‚™æˆ–ä½¿ç”¨éŸ³é »åº«
```

**éœ€è¦æº–å‚™**: 6 é¦–BGM + 11 å€‹æ ¸å¿ƒSFX

#### Phase 4: ä»»å‹™å‹•ç•«æ“´å±•ï¼ˆå¯é¸ï¼‰

ç”Ÿæˆå‰©é¤˜7ç¨®ä»»å‹™å‹•ç•«ï¼š
```bash
# ç”Ÿæˆæ‰€æœ‰ä»»å‹™å‹•ç•«
npm run assets:task-animations-full
```

**éœ€è¦ç”Ÿæˆ**: 462 å¹€ï¼ˆ7 ç¨® Ã— 6 å¹€ Ã— 11 è§’è‰²ï¼‰

---

## ğŸ“Š è£œå……è³‡æºçµ±è¨ˆ

| è³‡æºé¡å‹ | å·²ç”Ÿæˆ | ç¼ºå¤± | å„ªå…ˆç´š |
|---------|--------|------|--------|
| åŸºç¤å‹•ç•«ï¼ˆ8ç¨®ï¼‰ | 528å¹€ | 0 | âœ… å®Œæˆ |
| æ ¸å¿ƒä»»å‹™å‹•ç•« | 0 | 198å¹€ | ğŸ”´ é«˜ |
| æ“´å±•ä»»å‹™å‹•ç•« | 0 | 462å¹€ | ğŸŸ¡ ä¸­ |
| èƒŒæ™¯éŸ³æ¨‚ | 0 | 6é¦– | ğŸŸ¡ ä¸­ |
| éŸ³æ•ˆ | 0 | 11å€‹ | ğŸŸ¡ ä¸­ |
| **ç¸½è¨ˆ** | **528** | **677+** | - |

---

## âœ… æª¢æŸ¥æ¸…å–®

### ä»£ç¢¼ä¿®æ­£

- [ ] ä¿®æ­£ CharacterDispatchManager.js å‹•ç•«è·¯å¾‘ï¼ˆç¬¬315è¡Œï¼‰
- [ ] ä¿®æ­£ employeeTemplates.js è³‡æºå¼•ç”¨

### è³‡æºç”Ÿæˆ

- [ ] ç”Ÿæˆæ ¸å¿ƒä»»å‹™å‹•ç•«ï¼ˆcooking, prep, servingï¼‰
- [ ] æº–å‚™åŸºç¤BGMï¼ˆ6é¦–ï¼‰
- [ ] æº–å‚™æ ¸å¿ƒSFXï¼ˆ11å€‹ï¼‰
- [ ] ï¼ˆå¯é¸ï¼‰ç”Ÿæˆæ“´å±•ä»»å‹™å‹•ç•«

### æ–‡æª”æ›´æ–°

- [ ] æ›´æ–° ASSET_SCHEMA.md æ·»åŠ ä»»å‹™å‹•ç•«è¦ç¯„
- [ ] æ›´æ–° ASSET_SCHEMA.md æ·»åŠ éŸ³é »è³‡æºè¦ç¯„
- [ ] æ›´æ–° QUICK_REFERENCE.md æ·»åŠ ä»»å‹™å‹•ç•«æª¢æŸ¥æ¸…å–®

---

**å‰µå»ºæ—¥æœŸ**: 2025-10-27
**å„ªå…ˆç´š**: ğŸ”´ é«˜ï¼ˆä»£ç¢¼ä¿®æ­£ï¼‰ã€ğŸŸ¡ ä¸­ï¼ˆè³‡æºç”Ÿæˆï¼‰
**é ä¼°å·¥ä½œé‡**:
- ä»£ç¢¼ä¿®æ­£: 30åˆ†é˜
- æ ¸å¿ƒä»»å‹™å‹•ç•«ç”Ÿæˆ: 2å°æ™‚
- éŸ³é »è³‡æºæº–å‚™: è¦–å¤–éƒ¨è³‡æºè€Œå®š
