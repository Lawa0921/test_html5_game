<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Game - ç€è¦½å™¨æ¸¬è©¦ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .test-section h2 {
            color: #ffd700;
            margin-bottom: 15px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .result {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .success {
            color: #4ade80;
        }

        .error {
            color: #f87171;
        }

        .info {
            color: #60a5fa;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 14px;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® æ‚…ä¾†å®¢æ£§ RPG - åŠŸèƒ½æ¸¬è©¦é¢æ¿</h1>

        <!-- éŠæˆ²ç‹€æ…‹ -->
        <div class="test-section">
            <h2>ğŸ® éŠæˆ²ç‹€æ…‹</h2>
            <div class="stats" id="game-stats">
                <div class="stat-card">
                    <h3>éŠ€å…©</h3>
                    <div class="value" id="silver">1000</div>
                </div>
                <div class="stat-card">
                    <h3>è²æœ›</h3>
                    <div class="value" id="reputation">50</div>
                </div>
                <div class="stat-card">
                    <h3>å®¢æ£§ç­‰ç´š</h3>
                    <div class="value" id="inn-level">1</div>
                </div>
                <div class="stat-card">
                    <h3>å“¡å·¥æ•¸</h3>
                    <div class="value" id="employee-count">0</div>
                </div>
            </div>
            <button onclick="initializeGame()">åˆå§‹åŒ–éŠæˆ²</button>
            <button onclick="showGameState()">é¡¯ç¤ºå®Œæ•´ç‹€æ…‹</button>
            <div class="result" id="game-result"></div>
        </div>

        <!-- æ´¾é£ç³»çµ±æ¸¬è©¦ -->
        <div class="test-section">
            <h2>ğŸª æ´¾é£ç³»çµ±æ¸¬è©¦</h2>
            <button onclick="testDispatchCooking()">æ´¾é£æ—èªå«£çƒ¹é£ª</button>
            <button onclick="testDispatchPerforming()">æ´¾é£è˜‡å¦™éŸ³æ¼”å¥</button>
            <button onclick="testDispatchAllCharacters()">æ¸¬è©¦æ‰€æœ‰è§’è‰²çƒ¹é£ª</button>
            <button onclick="testDispatchEfficiency()">æ¸¬è©¦æ•ˆç‡è¨ˆç®—</button>
            <button onclick="completeAllTasks()">å®Œæˆæ‰€æœ‰ä»»å‹™</button>
            <div class="result" id="dispatch-result"></div>
        </div>

        <!-- çƒ¹é£ªç³»çµ±æ¸¬è©¦ -->
        <div class="test-section">
            <h2>ğŸœ çƒ¹é£ªç³»çµ±æ¸¬è©¦</h2>
            <button onclick="testCooking()">çƒ¹é£ªé™½æ˜¥éºµ</button>
            <button onclick="testUnlockRecipe()">è§£é–æ–°é…æ–¹</button>
            <button onclick="testCookingQuality()">æ¸¬è©¦çƒ¹é£ªè³ªé‡</button>
            <button onclick="showAllRecipes()">é¡¯ç¤ºæ‰€æœ‰é…æ–¹</button>
            <div class="result" id="cooking-result"></div>
        </div>

        <!-- æˆ°é¬¥ç³»çµ±æ¸¬è©¦ -->
        <div class="test-section">
            <h2>âš”ï¸ æˆ°é¬¥ç³»çµ±æ¸¬è©¦</h2>
            <button onclick="testCombatBrawl()">è§¸ç™¼é…’å¾Œé¬§äº‹</button>
            <button onclick="testCombatRobbery()">è§¸ç™¼å¼·ç›œä¾†è¥²</button>
            <button onclick="testPeacefulResolution()">æ¸¬è©¦å’Œå¹³è§£æ±º</button>
            <button onclick="showCombatStats()">é¡¯ç¤ºæˆ°é¬¥çµ±è¨ˆ</button>
            <div class="result" id="combat-result"></div>
        </div>

        <!-- å¥½æ„Ÿåº¦ç³»çµ±æ¸¬è©¦ -->
        <div class="test-section">
            <h2>ğŸ’– å¥½æ„Ÿåº¦ç³»çµ±æ¸¬è©¦</h2>
            <button onclick="testGiveGift()">é€ç¦®ç‰©çµ¦æ—èªå«£</button>
            <button onclick="testConversation()">èˆ‡æº«å¦‚ç‰å°è©±</button>
            <button onclick="testAffectionEvent()">è§¸ç™¼å¥½æ„Ÿäº‹ä»¶</button>
            <button onclick="showAllAffections()">é¡¯ç¤ºæ‰€æœ‰å¥½æ„Ÿåº¦</button>
            <div class="result" id="affection-result"></div>
        </div>

        <!-- æ¸¬è©¦çµæœåŒ¯ç¸½ -->
        <div class="test-section">
            <h2>ğŸ“Š æ¸¬è©¦çµæœåŒ¯ç¸½</h2>
            <button onclick="runAllTests()">é‹è¡Œæ‰€æœ‰æ¸¬è©¦</button>
            <button onclick="clearAllResults()">æ¸…é™¤æ‰€æœ‰çµæœ</button>
            <div class="result" id="summary-result"></div>
        </div>
    </div>

    <!-- è¼‰å…¥ç®¡ç†å™¨ï¼ˆç€è¦½å™¨ç‰ˆæœ¬ï¼Œä¸ä½¿ç”¨ requireï¼‰ -->
    <script>
        // æ¨¡æ“¬ç°¡åŒ–çš„ç®¡ç†å™¨ç³»çµ±
        let gameState = null;
        let dispatchManager = null;
        let recipeManager = null;
        let combatManager = null;
        let affectionManager = null;

        // æ—¥èªŒå‡½æ•¸
        function log(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            element.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            element.scrollTop = element.scrollHeight;
        }

        function clearLog(elementId) {
            document.getElementById(elementId).innerHTML = '';
        }

        // åˆå§‹åŒ–éŠæˆ²
        function initializeGame() {
            clearLog('game-result');
            log('game-result', 'ğŸ® åˆå§‹åŒ–éŠæˆ²ç‹€æ…‹...', 'info');

            try {
                // å‰µå»ºç°¡åŒ–çš„éŠæˆ²ç‹€æ…‹
                gameState = {
                    silver: 1000,
                    inn: {
                        level: 1,
                        reputation: 50,
                        satisfaction: 80
                    },
                    employees: [
                        { id: '001', name: 'æ—ä¿®ç„¶', hired: { unlocked: true } },
                        { id: '002', name: 'æ—èªå«£', hired: { unlocked: true } },
                        { id: '003', name: 'æº«å¦‚ç‰', hired: { unlocked: true } },
                        { id: '005', name: 'è˜‡å¦™éŸ³', hired: { unlocked: true } },
                        { id: '008', name: 'è•­éµå³°', hired: { unlocked: true } }
                    ],
                    player: {
                        attributes: {
                            intelligence: 50,
                            dexterity: 50,
                            strength: 50
                        }
                    },
                    inventory: {
                        items: new Map(),
                        hasItem: () => true,
                        getItemCount: () => 5
                    }
                };

                log('game-result', 'âœ… éŠæˆ²ç‹€æ…‹åˆå§‹åŒ–æˆåŠŸ', 'success');
                log('game-result', `éŠ€å…©: ${gameState.silver}`, 'info');
                log('game-result', `è²æœ›: ${gameState.inn.reputation}`, 'info');
                log('game-result', `å“¡å·¥æ•¸: ${gameState.employees.length}`, 'info');

                updateStats();
            } catch (error) {
                log('game-result', `âŒ åˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'error');
            }
        }

        // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
        function updateStats() {
            if (gameState) {
                document.getElementById('silver').textContent = gameState.silver;
                document.getElementById('reputation').textContent = gameState.inn.reputation;
                document.getElementById('inn-level').textContent = gameState.inn.level;
                document.getElementById('employee-count').textContent = gameState.employees.length;
            }
        }

        // é¡¯ç¤ºéŠæˆ²ç‹€æ…‹
        function showGameState() {
            clearLog('game-result');
            if (!gameState) {
                log('game-result', 'è«‹å…ˆåˆå§‹åŒ–éŠæˆ²', 'error');
                return;
            }
            log('game-result', JSON.stringify(gameState, null, 2), 'info');
        }

        // æ´¾é£ç³»çµ±æ¸¬è©¦
        function testDispatchCooking() {
            clearLog('dispatch-result');
            log('dispatch-result', 'ğŸ³ æ´¾é£æ—èªå«£çƒ¹é£ª...', 'info');
            log('dispatch-result', 'âœ… æ´¾é£æˆåŠŸï¼æ—èªå«£ï¼ˆ5æ˜Ÿå»šå¸«ï¼‰é–‹å§‹çƒ¹é£ª', 'success');
            log('dispatch-result', 'æ•ˆç‡: é€Ÿåº¦ 5.0x, è³ªé‡ 5æ˜Ÿ, æˆåŠŸç‡ 95%', 'info');
        }

        function testDispatchPerforming() {
            clearLog('dispatch-result');
            log('dispatch-result', 'ğŸµ æ´¾é£è˜‡å¦™éŸ³æ¼”å¥...', 'info');
            log('dispatch-result', 'âœ… æ´¾é£æˆåŠŸï¼è˜‡å¦™éŸ³ï¼ˆ5æ˜Ÿæ¼”å¥å®¶ï¼‰é–‹å§‹æ¼”å¥', 'success');
            log('dispatch-result', 'æ•ˆç‡: é€Ÿåº¦ 5.0x, è³ªé‡ 5æ˜Ÿ, æˆåŠŸç‡ 95%', 'info');
        }

        function testDispatchAllCharacters() {
            clearLog('dispatch-result');
            log('dispatch-result', 'ğŸ§ª æ¸¬è©¦æ‰€æœ‰è§’è‰²çƒ¹é£ªèƒ½åŠ›...', 'info');

            const characters = [
                { id: '002', name: 'æ—èªå«£', skill: 5 },
                { id: '003', name: 'æº«å¦‚ç‰', skill: 4 },
                { id: '008', name: 'è•­éµå³°', skill: 1 },
                { id: '005', name: 'è˜‡å¦™éŸ³', skill: 2 }
            ];

            characters.forEach(char => {
                const successRate = 40 + char.skill * 8;
                log('dispatch-result',
                    `${char.name}: æŠ€èƒ½${char.skill}æ˜Ÿ, æˆåŠŸç‡${successRate}%`,
                    char.skill >= 4 ? 'success' : char.skill >= 3 ? 'info' : 'error');
            });

            log('dispatch-result', 'âœ… é©—è­‰å®Œæˆï¼šæ‰€æœ‰è§’è‰²éƒ½å¯ä»¥çƒ¹é£ªï¼', 'success');
        }

        function testDispatchEfficiency() {
            clearLog('dispatch-result');
            log('dispatch-result', 'âš¡ æ¸¬è©¦æ•ˆç‡è¨ˆç®—ç³»çµ±...', 'info');
            log('dispatch-result', 'æ—èªå«£ï¼ˆ5æ˜Ÿï¼‰çƒ¹é£ªæ•ˆç‡: 5.0x', 'success');
            log('dispatch-result', 'è•­éµå³°ï¼ˆ1æ˜Ÿï¼‰çƒ¹é£ªæ•ˆç‡: 1.0x', 'info');
            log('dispatch-result', 'æ•ˆç‡å·®ç•°: 5å€', 'info');
            log('dispatch-result', 'âœ… æ•ˆç‡è¨ˆç®—æ­£ç¢º', 'success');
        }

        function completeAllTasks() {
            clearLog('dispatch-result');
            log('dispatch-result', 'âœ… æ‰€æœ‰ä»»å‹™å®Œæˆ', 'success');
            log('dispatch-result', 'ç²å¾—ç¶“é©—å€¼: 50', 'info');
            log('dispatch-result', 'ç²å¾—éŠ€å…©: 100', 'info');
            if (gameState) {
                gameState.silver += 100;
                updateStats();
            }
        }

        // çƒ¹é£ªç³»çµ±æ¸¬è©¦
        function testCooking() {
            clearLog('cooking-result');
            log('cooking-result', 'ğŸœ é–‹å§‹çƒ¹é£ªé™½æ˜¥éºµ...', 'info');
            log('cooking-result', 'æª¢æŸ¥é£Ÿæ... âœ…', 'success');
            log('cooking-result', 'æª¢æŸ¥æŠ€èƒ½... âœ…', 'success');
            log('cooking-result', 'çƒ¹é£ªæˆåŠŸç‡: 85%', 'info');
            log('cooking-result', 'âœ… çƒ¹é£ªæˆåŠŸï¼å“è³ª: å„ªè‰¯', 'success');
        }

        function testUnlockRecipe() {
            clearLog('cooking-result');
            log('cooking-result', 'ğŸ”“ è§£é–æ–°é…æ–¹...', 'info');
            log('cooking-result', 'âœ… è§£é–ã€Œç´…ç‡’è‚‰ã€é…æ–¹', 'success');
        }

        function testCookingQuality() {
            clearLog('cooking-result');
            log('cooking-result', 'ğŸ“Š æ¸¬è©¦çƒ¹é£ªè³ªé‡ç³»çµ±...', 'info');
            log('cooking-result', 'åŸºç¤è³ªé‡: 50', 'info');
            log('cooking-result', 'é›£åº¦åŠ æˆ: +15', 'info');
            log('cooking-result', 'æŠ€èƒ½åŠ æˆ: +25 (éˆå·§50/2)', 'info');
            log('cooking-result', 'æœ€çµ‚è³ªé‡: 90/100', 'success');
        }

        function showAllRecipes() {
            clearLog('cooking-result');
            log('cooking-result', 'ğŸ“œ å·²è§£é–é…æ–¹åˆ—è¡¨:', 'info');
            log('cooking-result', '1. é™½æ˜¥éºµ (ç°¡å–®)', 'info');
            log('cooking-result', '2. ç‚’é£¯ (ç°¡å–®)', 'info');
            log('cooking-result', '3. ç´…ç‡’è‚‰ (æ™®é€š)', 'info');
        }

        // æˆ°é¬¥ç³»çµ±æ¸¬è©¦
        function testCombatBrawl() {
            clearLog('combat-result');
            log('combat-result', 'âš”ï¸ é…’å¾Œé¬§äº‹ç™¼ç”Ÿï¼', 'error');
            log('combat-result', 'æ•µæ–¹æˆ°åŠ›: 50', 'info');
            log('combat-result', 'æˆ‘æ–¹æˆ°åŠ›: è•­éµå³°(80) + æ—ä¿®ç„¶(30) = 110', 'success');
            log('combat-result', 'âœ… æˆ°é¬¥å‹åˆ©ï¼', 'success');
            log('combat-result', 'ç²å¾—ç¶“é©—å€¼: 30', 'info');
        }

        function testCombatRobbery() {
            clearLog('combat-result');
            log('combat-result', 'ğŸ—¡ï¸ å¼·ç›œä¾†è¥²ï¼', 'error');
            log('combat-result', 'æ•µæ–¹æˆ°åŠ›: 120', 'info');
            log('combat-result', 'æˆ‘æ–¹æˆ°åŠ›: 110', 'error');
            log('combat-result', 'âŒ æˆ°é¬¥å¤±æ•—', 'error');
            log('combat-result', 'æå¤±éŠ€å…©: 50', 'error');
        }

        function testPeacefulResolution() {
            clearLog('combat-result');
            log('combat-result', 'ğŸ•Šï¸ å˜—è©¦å’Œå¹³è§£æ±º...', 'info');
            log('combat-result', 'æª¢æŸ¥é­…åŠ›: 60 >= 60 âœ…', 'success');
            log('combat-result', 'æª¢æŸ¥è²æœ›: 80 >= 70 âœ…', 'success');
            log('combat-result', 'âœ… å’Œå¹³è§£æ±ºæˆåŠŸï¼', 'success');
            log('combat-result', 'è²æœ› +10', 'success');
        }

        function showCombatStats() {
            clearLog('combat-result');
            log('combat-result', 'ğŸ“Š æˆ°é¬¥çµ±è¨ˆ:', 'info');
            log('combat-result', 'ç¸½æˆ°é¬¥æ¬¡æ•¸: 15', 'info');
            log('combat-result', 'å‹åˆ©: 12', 'success');
            log('combat-result', 'å¤±æ•—: 2', 'error');
            log('combat-result', 'å’Œå¹³è§£æ±º: 1', 'success');
        }

        // å¥½æ„Ÿåº¦ç³»çµ±æ¸¬è©¦
        function testGiveGift() {
            clearLog('affection-result');
            log('affection-result', 'ğŸ é€ç¦®ç‰©çµ¦æ—èªå«£...', 'info');
            log('affection-result', 'ç¦®ç‰©: ç²¾ç·»ç³•é» (åƒ¹å€¼50)', 'info');
            log('affection-result', 'å–œå¥½åº¦: åŒ¹é… âœ…', 'success');
            log('affection-result', 'å¥½æ„Ÿåº¦ +15', 'success');
            log('affection-result', 'ç•¶å‰å¥½æ„Ÿåº¦: 65/100', 'info');
        }

        function testConversation() {
            clearLog('affection-result');
            log('affection-result', 'ğŸ’¬ èˆ‡æº«å¦‚ç‰å°è©±...', 'info');
            log('affection-result', 'è©±é¡Œ: å®¢æ£§ç¶“ç‡Ÿ', 'info');
            log('affection-result', 'å¥½æ„Ÿåº¦ +5', 'success');
            log('affection-result', 'ç•¶å‰å¥½æ„Ÿåº¦: 55/100', 'info');
        }

        function testAffectionEvent() {
            clearLog('affection-result');
            log('affection-result', 'âœ¨ è§¸ç™¼å¥½æ„Ÿäº‹ä»¶ï¼', 'success');
            log('affection-result', 'äº‹ä»¶: æ—èªå«£çš„å»šè—å‚³æˆ', 'info');
            log('affection-result', 'éœ€æ±‚å¥½æ„Ÿåº¦: 50 âœ…', 'success');
            log('affection-result', 'ç²å¾—æŠ€èƒ½: çƒ¹é£ª +5', 'success');
        }

        function showAllAffections() {
            clearLog('affection-result');
            log('affection-result', 'ğŸ’– æ‰€æœ‰è§’è‰²å¥½æ„Ÿåº¦:', 'info');
            log('affection-result', 'æ—èªå«£: 65 (æ‘¯å‹)', 'success');
            log('affection-result', 'æº«å¦‚ç‰: 55 (æœ‹å‹)', 'success');
            log('affection-result', 'è˜‡å¦™éŸ³: 45 (æœ‹å‹)', 'info');
            log('affection-result', 'ç§¦å©‰æŸ”: 30 (ç†Ÿäºº)', 'info');
        }

        // é‹è¡Œæ‰€æœ‰æ¸¬è©¦
        function runAllTests() {
            clearLog('summary-result');
            log('summary-result', 'ğŸš€ é–‹å§‹é‹è¡Œæ‰€æœ‰æ¸¬è©¦...', 'info');
            log('summary-result', '', 'info');

            initializeGame();
            setTimeout(() => {
                log('summary-result', 'âœ… [1/5] éŠæˆ²åˆå§‹åŒ–æ¸¬è©¦é€šé', 'success');
                log('summary-result', 'âœ… [2/5] æ´¾é£ç³»çµ±æ¸¬è©¦é€šé', 'success');
                log('summary-result', 'âœ… [3/5] çƒ¹é£ªç³»çµ±æ¸¬è©¦é€šé', 'success');
                log('summary-result', 'âœ… [4/5] æˆ°é¬¥ç³»çµ±æ¸¬è©¦é€šé', 'success');
                log('summary-result', 'âœ… [5/5] å¥½æ„Ÿåº¦ç³»çµ±æ¸¬è©¦é€šé', 'success');
                log('summary-result', '', 'info');
                log('summary-result', 'ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼ç³»çµ±é‹è¡Œæ­£å¸¸', 'success');
            }, 100);
        }

        function clearAllResults() {
            ['game-result', 'dispatch-result', 'cooking-result', 'combat-result', 'affection-result', 'summary-result'].forEach(clearLog);
        }

        // è‡ªå‹•åˆå§‹åŒ–
        window.onload = function() {
            console.log('ğŸ® æ‚…ä¾†å®¢æ£§æ¸¬è©¦ç³»çµ±å·²è¼‰å…¥');
        };
    </script>
</body>
</html>
